package entity

import "encoding/json"

type fooStruct struct {
	string string
	int    int
}

type foosStruct []fooInterface

type fooInterface interface {
	String() string
	Int() int
	SetString(string string)
	SetInt(int int)
	SetAll(req fooInterface)
	MarshalJSON() ([]byte, error)
	UnmarshalJSON(data []byte) error
}
type foosInterface interface {
	Len() int
	Append(req fooInterface)
	Elements() []fooInterface
}

func (m *foosStruct) Len() int {
	if m != nil {
		return len(*m)
	}
	return 0
}
func (m *foosStruct) Append(req fooInterface) {
	if m != nil {
		*m = append(*m, req)
	}
}
func (m *foosStruct) Elements() []fooInterface {
	return *m
}
func (m *fooStruct) String() string {
	return m.string
}

func (m *fooStruct) Int() int {
	return m.int
}

func (m *fooStruct) SetString(string string) {
	m.string = string
}

func (m *fooStruct) SetInt(int int) {
	m.int = int
}

func (m *fooStruct) SetAll(req fooInterface) {
	m.SetString(req.String())
	m.SetInt(req.Int())
}

func (m *fooStruct) MarshalJSON() ([]byte, error) {
	type jsonStructPrivate struct {
		String string `json:"string"`
		Int    int    `json:"int"`
	}
	jsonStruct := jsonStructPrivate{
		Int:    m.Int(),
		String: m.String(),
	}
	return json.Marshal(&jsonStruct)
}

func (m *fooStruct) UnmarshalJSON(data []byte) error {
	type jsonStructPrivate struct {
		String string `json:"string"`
		Int    int    `json:"int"`
	}
	jsonStruct := jsonStructPrivate{}
	err := json.Unmarshal(data, &jsonStruct)
	if err != nil {
		return err
	}
	m.SetString(jsonStruct.String)
	m.SetInt(jsonStruct.Int)
	return nil
}
